## 文件位置

home/cike/rola/Amap_api.py

### 使用方式

导入这个文件，然后直接调用文件里面的函数

```python
import Amap_api.py
```

## API

### 获取地理编码

- 代码

```python
Amap_api.get_location(address)
```

- 输入

| 输入      | 类型     | 示例            | 备注   |
|---------|--------|---------------|------|
| address | String | '华南理工大学大学城校区' | 具体地址 |

- 输出

| 输出       | 类型     | 示例                     | 备注          |
|----------|--------|------------------------|-------------|
| location | String | '113.405216,23.046336' | 当前位置的经纬度    |
| citycode | String | '020'                  | 当前位置所在城市的编码 |
| adcode   | String | '440113'               | 当前位置的邮政编码   |

### 获取地理逆编码

- 代码

```python
Amap_api.get_address(location)
```

- 输入

| 输入       | 类型     | 示例                     | 备注       |
|----------|--------|------------------------|----------|
| location | String | '113.405216,23.046336' | 当前位置的经纬度 |

- 输出

| 输出       | 类型     | 示例            | 备注          |
|----------|--------|---------------|-------------|
| address  | String | '华南理工大学大学城校区' | 具体地址        |
| citycode | String | 020           | 当前位置所在城市的编码 |
| adcode   | String | 440113        | 当前位置的邮政编码   |

### 周边搜索

- 代码

```python
Amap_api.surrounding(address, keywords)
```

- 输入

| 输入       | 类型     | 示例                                        | 备注                   |
|----------|--------|-------------------------------------------|----------------------|
| address  | String | '华南理工大学大学城校区'<br>或 '113.405216,23.046336' | 具体地址 <br/>或 当前位置的经纬度 |
| keywords | String | '中国银行                                     | 可以输入多个关键词，用'\|'隔开    |

- 输出

| 输出       | 类型     | 示例                     | 备注             |
|----------|--------|------------------------|----------------|
| name     | String | '中国银行24小时自助银行(新造支行)'   | 搜索到的名称         |
| address  | String | '新造镇新广路16号地铺1-7号',     | 具体地址           |
| location | String | '113.405216,23.046336' | 当前位置的经纬度       |
| distance | String | '1594'                 | 距离当前位置的多远（单位m） |

### 天气查询

- 代码

```python
Amap_api.wether(address)
```

- 输入

| 输入      | 类型     | 示例                                        | 备注                   |
|---------|--------|-------------------------------------------|----------------------|
| address | String | '华南理工大学大学城校区'<br>或 '113.405216,23.046336' | 具体地址 <br/>或 当前位置的经纬度 |

- 输出

  还有一些不重要的输出，就不在这里列举

| 输出            | 类型     | 示例       | 备注        |
|---------------|--------|----------|-----------|
| province      | String | '广东'     | 当前所在省份    |
| city          | String | '番禺区'    | 当前所在区域    |
| adcode        | String | '440113' | 当前位置的邮政编码 |
| wether        | String | '晴'      | 当前的天气情况   |
| temperature   | String | '7'      | 当前的温度     |
| winddirection | String | '北'      | 当前风向      |
| windpower     | String | '≤3'     | 当前风力强度    |
| humidity      | String | '63'     | 当前湿度      |

### 步行导航

- 代码

```python
Amap_api.working(origin, destination)
```

- 输入

| 输入          | 类型     | 示例                                        | 备注                   |
|-------------|--------|-------------------------------------------|----------------------|
| origin      | String | '华南理工大学大学城校区'<br>或 '113.405216,23.046336' | 具体地址 <br/>或 当前位置的经纬度 |
| destination | String | '中山大学大学城校区'<br>或 '113.392517,22.517024'   | 具体地址 <br/>或 当前位置的经纬度 |

- 输出

| 输出             | 类型     | 示例      | 备注       |
|----------------|--------|---------|----------|
| total_distance | String | '80938' | 总距离（单位m） |
| total_duration | String | '64750' | 总时长（单位s） |
| steps          | list   | 看下表     | 具体步行方案   |

steps的值为一个列表，**列表中每一项为一个字典**，字典的内容如下表所示（只包含了一些重要的，不重要的就不赘述了）：

| key              | 类型     | 实例           | 备注                                                      |
|------------------|--------|--------------|---------------------------------------------------------|
| instruction      | String | '向东南步行48米右转' | 步行导航的指令                                                 |
| duration         | String | '38'         | 预计完成该步骤所需时间（单位s）                                        |
| action           | String | '右转'         | 非最后一步时给予的提示<br>可以先播报instruction，等待duration时间后，再播报action |
| assistant_action | String | ''           | 只有步行导航的最后一步才有值，值为'到达目的地'                                |

### 公交导航

- 代码

```python
Amap_api.transits(origin, destination)
```

- 输入

| 输入          | 类型     | 示例                                        | 备注                   |
|-------------|--------|-------------------------------------------|----------------------|
| origin      | String | '华南理工大学大学城校区'<br>或 '113.405216,23.046336' | 具体地址 <br/>或 当前位置的经纬度 |
| destination | String | '中山大学大学城校区'<br>或 '113.392517,22.517024'   | 具体地址 <br/>或 当前位置的经纬度 |

- 输出

  输出的值为一个列表，**列表中每一项为一个字典**，表示具体乘车方案的步骤，字典的内容如下表所示（只包含了一些重要的，不重要的就不赘述了）：

| 输出      | 类型   | 示例  | 备注       |
|:--------|------|-----|----------|
| walking | list | 看下表 | 总距离（单位m） |
| bus     | list | 看下表 | 总时长（单位s） |

​        **walking**的值为一个列表，**列表中每一项为一个字典**，内容如下表所示：

| key         | 类型     | 示例                                                           | 备注         |
|-------------|--------|--------------------------------------------------------------|------------|
| destination | String | '113.400482,23.043407'                                       | 步行所到的目的地   |
| distance    | String | '978'                                                        | 步行的距离（单位m） |
| origin      | String | '113.405533,23.046045'                                       | 出发的地理位置    |
| steps       | list   | 只需关注 **'instruction'**: '步行48米右转' <br>和 **'distance'**: '48' | 具体的步行步骤    |

​        **bus**的值为一个列表，列表中有一个key为**buslines**的列表，且该列表只有一个元素，该元素为字典类型，读取到该字典的代码
为`Amap_api.transits(origin, destination)[index]['bus']['buslines'][0]`，字典的内容如下表所示（只包含了一些重要的，不重要的就不赘述了）：

| key                    | 类型     | 示例                  | 备注            |
|------------------------|--------|---------------------|---------------|
| name                   | String | '地铁7号线(大学城南--美的大道)' | 乘坐线路的名称       |
| type                   | String | '地铁线路'              | 交通类型，如是地铁or大巴 |
| departure_stop -> name | String | '大学城南'              | 出发的站点         |
| arrival_stop -> name   | String | '南村万博'              | 下车的站点         |

### 公交导航（输出语句）

- 代码

```python
Amap_api.transits_statement(origin, destination)
```

- 输入

| 输入          | 类型     | 示例                                        | 备注                   |
|-------------|--------|-------------------------------------------|----------------------|
| origin      | String | '华南理工大学大学城校区'<br>或 '113.405216,23.046336' | 具体地址 <br/>或 当前位置的经纬度 |
| destination | String | '中山大学大学城校区'<br>或 '113.392517,22.517024'   | 具体地址 <br/>或 当前位置的经纬度 |

- 输出

| 类型     | 示例                                                                                                                                                                          | 备注         |
|--------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------|
| String | '步行978米。从大学城南乘坐地铁7号线(大学城南--美的大道),在南村万博下车步行329米。从南村万博乘坐地铁18号线(冼村--万顷沙),在横沥下车步行175米。从地铁横沥站乘坐K981路(蕉门公交总站--陵岗),在张家边路口下车步行1米。从张家边路口乘坐033路(沙边置业路北--城南公交枢纽站),在市政府下车步行355米。到达目的地.' | 直接返回处理好的语句 |

